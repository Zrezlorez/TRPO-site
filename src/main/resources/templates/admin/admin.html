<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<html lang="en">
<head>
    <meta th:insert="~{fragments/frag1 :: bootstrapcss}" charset="utf-8">
    <title>Users</title>
</head>
<body>
<div th:insert="~{fragments/frag1 :: navbar}"></div>
<div class="row">
    <div class="col-sm-2">
        <div class="nav flex-column nav-pills" id="v-pills-tab" role="tablist" aria-orientation="vertical">
            <a class="nav-link active" href="/admin">Admin</a>
            <a class="nav-link" href="/user">User</a>
        </div>
    </div>
    <div class="col-sm">
        <h1>Admin panel</h1>
        <ul class="nav nav-tabs">
            <li class="nav-item">
                <a class="nav-link active" data-toggle="tab" href="#users">Users table</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" data-toggle="tab" href="#new">New user</a>
            </li>
        </ul>
        <div class="tab-content">
            <div class="tab-pane fade show active" id="users">
                <h4>All users</h4>
                <table class="table">
                    <thead>
                    <tr>
                        <th scope="col">ID</th>
                        <th scope="col">Name</th>
                        <th scope="col">Password</th>
                        <th scope="col">Roles</th>
                        <th scope="col">Edit</th>
                        <th scope="col">Delete</th>
                    </tr>
                    </thead>
                    <tbody id="usersTableBody">
                    </tbody>
                </table>
            </div>
            <div class="tab-pane fade" id="new">
                <h4>Add new user</h4>
                <div class="position-absolute top-50 start-50 translate-middle">
                    <div class="position-relative start-50 translate-middle my-4">
                        <label for="newName" class="position-relative start-50 translate-middle">
                            <b>Name</b>
                        </label>
                        <input type="text" class="form-control" id="newName"/>
                    </div>
                    <div class="position-relative start-50 translate-middle my-4">
                        <label for="newPassword" class="position-relative start-50 translate-middle">
                            <b>Password</b>
                        </label>
                        <input type="password" class="form-control" id="newPassword"/>
                    </div>
                    <br>
                    <div class="position-relative start-50 translate-middle">
                        <label for="newRoles" class="position-relative start-50 translate-middle">
                            <b>Roles</b>
                        </label>
                        <select class="form-select" th:name="rolesId" multiple aria-label="multiple select" id="newRoles">
                            <option th:each="role : ${@roleService.findAll()}"
                                    th:text="${role.role}"
                                    th:value="${role.id}">
                        </select>
                    </div>
                    <button type="button" class="btn btn-success btn-lg position-relative start-50 translate-middle" id="submitNewBtn">Add new user</button>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="editForm">
    <div class="modal fade editModal" id="editModal" tabindex="-1" aria-labelledby="editLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="editLabel">Edit user</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body mx-auto">
                    <div class="my-4">
                        <label for="editId" class="position-relative start-50 translate-middle">
                            <b>ID</b>
                        </label>
                        <input type="number" readonly class="form-control" id="editId" name="id">
                    </div>
                    <div class="my-4">
                        <label for="editName" class="position-relative start-50 translate-middle">
                            <b>Name</b>
                        </label>
                        <input type="text" class="form-control" id="editName" name="name">
                    </div>
                    <div class="my-4">
                        <label for="editPassword" class="position-relative start-50 translate-middle">
                            <b>Name</b>
                        </label>
                        <input type="password" class="form-control" id="editPassword" name="password">
                    </div>
                    <div class="my-4">
                        <label for="editRoles" class="position-relative start-50 translate-middle">
                            <b>Roles</b>
                        </label>
                        <select class="form-select" multiple aria-label="multiple select" id="editRoles" name="rolesId">
                        </select>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-info" data-bs-dismiss="modal" id="submitEditBtn">Edit</button>
                </div>
            </div>
        </div>
    </div>
</div>
<div id="deleteForm">
    <div class="modal fade" id="deleteModal" tabindex="-1" aria-labelledby="deleteLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="deleteLabel">Delete user</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body mx-auto">
                    <div class="my-4">
                        <label for="deleteId" class="position-relative start-50 translate-middle">
                            <b>ID</b>
                        </label>
                        <input type="number" readonly class="form-control" id="deleteId" name="deleteId">
                    </div>
                    <div class="my-4">
                        <label for="deleteName" class="position-relative start-50 translate-middle">
                            <b>Name</b>
                        </label>
                        <input type="text" readonly class="form-control" id="deleteName">
                    </div>
                    <div class="my-4">
                        <label for="deletePassword" class="position-relative start-50 translate-middle">
                            <b>Password</b>
                        </label>
                        <input type="password" readonly class="form-control" id="deletePassword">
                    </div>
                    <div class="my-4">
                        <label for="deleteRoles" class="position-relative start-50 translate-middle">
                            <b>Roles</b>
                        </label>
                        <select class="form-select" readonly multiple aria-label="multiple select" id="deleteRoles">
                        </select>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-danger" data-bs-dismiss="modal" id="submitDeleteBtn">Delete</button>
                </div>
            </div>
        </div>
    </div>
</div>

<div th:insert="~{fragments/frag1 :: bootstrapjs}"></div>
<script type="module" src="javascript/main.js"></script>
<script type="module" src="javascript/onPageLoad.js"></script>
</body>
</html>